<%- include partials/header -%>

    <main>
        <div class="thread-container">
            <div class="big-img-cont">
                    <img class="big-img" src="../images/<%= thread[0].thread_image_id %>">
                    <div class="thread-info-cont">
                        <div class="username"><%= thread[0].username %></div>
                        <div class="dateTime"><%= thread[0].thread_timestamp %></div>
                    </div>

                    
                    <div class="upvote-container">
                        <div id="<%= data[i].id %>" class="
                        
                        <%_ if (session) { _%>
                        upvote-default-btn
                            <%_ for (var j = 0; j < likedThread.length; j++) { _%>
                                <%_ if (data[i].id === likedThread[j].thread) { _%>
                                    upvote-non-clickable-btn
                                <%_ }; _%>
                            <%_ }; _%>
                        ">
                        <%_ } else { _%>
                            upvote-lurker-btn">
                        <%_ }; _%>
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36"><path d="M35.885 11.833c0-5.45-4.418-9.868-9.867-9.868-3.308 0-6.227 1.633-8.018 4.129-1.791-2.496-4.71-4.129-8.017-4.129-5.45 0-9.868 4.417-9.868 9.868 0 .772.098 1.52.266 2.241C1.751 22.587 11.216 31.568 18 34.034c6.783-2.466 16.249-11.447 17.617-19.959.17-.721.268-1.469.268-2.242z"/></svg>
                        </div>
                        <div class="upvote-number num-<%= data[i].id %>"><%= data[i].thread_likes %></div>
                    </div>

                    <div class="thread-name"><%= thread[0].thread_name %></div>
                    <div class="thread-text"><%= thread[0].thread_text %></div>
            </div>
            
            <div class="post-cont">

                <% for (var i = 0; i < replies.length; i++) { %>
                    <div class="post">
                        <div class="thread-info-cont">
                            <div class="username"><%= replies[i].username %></div>
                            <div class="dateTime"><%= replies[i].reply_timestamp %></div>
                        </div>
                        <div class="thread-text"><%= replies[i].reply_text %></div>
                    </div>
                <% }; %>

                <% if (session) { %>
                    <div class="new-comment">
                        <form class ="form-cont" ref="commentForm" id="commentForm" action="/upload" method="post" encType="multipart/form-data">
                            <div class="comment-field">
                                <div class="comment-input">
                                    <label for="comment">Comment</label></br>
                                    <textarea name="uploadComment"  rows="8" wrap="soft" tabindex="4"></textarea>
                                </div><br>
                                <div class="form-actions" id="upload-action">
                                    <input class="btn" type="submit" value="Comment"/>
                                </div>
                            </div>
                        </form>
                    </div>
                <% }; %>

            </div>
        </div>
    </main>
    
<%- include partials/footer -%>